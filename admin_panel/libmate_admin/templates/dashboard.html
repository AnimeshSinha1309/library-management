{% extends 'base.html' %} {% block title %}Home{% endblock %} {% block content%}

<script>
	window.onload = function () {
		CanvasJS.addColorSet("shades", [
			//colorSet Array
			"#39B2D7",
			"#9414D0",
			"#E11BBF",
			"#E11B74",
			"#ED2121",
		]);
		// var j = 1;
		// const x = 0,
		// 	y = 0;
		// //converting string into json arr and making tupple to array by replacing
		// const dataTwo = JSON.parse(
		// 	"{{ datat | safe }}"
		// 		.replace(/\(/g, "[")
		// 		.replace(/\)/g, "]")
		// 		.replace(/'/g, '"')
		// );
		// dps = [];
		// for (var i = 0; i < dataTwo.length; i++) {
		// 	dps.push({
		// 		label: dataTwo[i][1],
		// 		y: dataTwo[i][0],
		// 		legendText: dataTwo[i][1] + ":" + dataTwo[i][0],
		// 	});
		// }
		// console.log(dps);
		var chart = new CanvasJS.Chart("chartContainer", {
			exportEnabled: true,
			animationEnabled: true,
			title: {
				text: "Fine Frequency",
				fontFamily: "tahoma",
			},
			axisX: {
				title: "Fine Value",
				gridThickness: 0,
			},
			axisY: {
				title: "No. of People",
				gridThickness: 0,
			},
			legend: {
				cursor: "pointer",
				itemclick: toggleDataSeries,
			},
			data: [
				{
					type: "column",
					fillColor: "rgba(158, 224, 244 ,0.5)",
					showInLegend: true,
					dataPoints: [
						{ label: "1", y: 84 },
						{ label: "2", y: 82 },
						{ label: "3", y: 66 },
						{ label: "4", y: 52 },
						{ label: "5", y: 41 },
						{ label: "6", y: 25 },
						{ label: "7", y: 13 },
						{ label: "8", y: 15 },
						{ label: "9", y: 15 },
						{ label: "10", y: 4 },
						{ label: "11", y: 1 },
						{ label: "12", y: 1 },
						{ label: "13", y: 1 },
					],
				},
			],
		});
		chart.render();

		var chart2 = new CanvasJS.Chart("chartContainer2", {
			exportEnabled: true,
			animationEnabled: true,
			title: {
				text: "No. of issues per day of month",
				fontFamily: "tahoma",
			},
			axisX: {
				title: "Days of Months",
				gridThickness: 0,
			},
			axisY: {
				title: "No. of books issued",
				gridThickness: 0,
			},
			legend: {
				cursor: "pointer",
				itemclick: toggleDataSeries,
			},
			data: [
				{
					type: "column",
					fillColor: "rgba(158, 224, 244 ,0.5)",
					showInLegend: true,
					dataPoints: [
						{ label: "1", y: 40 },
						{ label: "2", y: 35 },
						{ label: "3", y: 43 },
						{ label: "4", y: 29 },
						{ label: "5", y: 46 },
						{ label: "6", y: 25 },
						{ label: "7", y: 45 },
						{ label: "8", y: 33 },
						{ label: "9", y: 31 },
						{ label: "10", y: 37 },
						{ label: "11", y: 21 },
						{ label: "12", y: 27 },
						{ label: "13", y: 27 },
						{ label: "14", y: 28 },
						{ label: "15", y: 38 },
					],
				},
			],
		});
		chart2.render();

		var chart3 = new CanvasJS.Chart("chartContainer3", {
			exportEnabled: true,
			animationEnabled: true,
			title: {
				text: "No. of issues per day of week",
				fontFamily: "tahoma",
			},
			// dataPointWidth: 2,
			axisX: {
				title: "Day of Week",
				gridThickness: 0,
			},
			axisY: {
				title: "No. of books issued",
				gridThickness: 0,
			},
			legend: {
				cursor: "pointer",
				itemclick: toggleDataSeries,
			},
			data: [
				{
					type: "column",
					fillColor: "rgba(158, 224, 244 ,0.5)",
					showInLegend: true,
					dataPoints: [
						{ label: "Monday", y: 40 },
						{ label: "Tuesday", y: 35 },
						{ label: "Wednesday", y: 43 },
						{ label: "Thursday", y: 29 },
						{ label: "Friday", y: 46 },
						{ label: "Saturday", y: 25 },
					],
				},
			],
		});
		chart3.render();

		var chart4 = new CanvasJS.Chart("chartContainer4", {
			exportEnabled: true,
			animationEnabled: true,
			title: {
				text: "Return duration Frequency",
				fontFamily: "tahoma",
			},
			axisX: {
				title: "Time in days from issue",
				gridThickness: 0,
			},
			axisY: {
				title: "Books returned",
				gridThickness: 0,
			},
			legend: {
				cursor: "pointer",
				itemclick: toggleDataSeries,
			},
			data: [
				{
					type: "column",
					fillColor: "rgba(158, 224, 244 ,0.5)",
					showInLegend: true,
					dataPoints: [
						{ label: "1", y: 40 },
						{ label: "2", y: 35 },
						{ label: "3", y: 43 },
						{ label: "4", y: 29 },
						{ label: "5", y: 46 },
						{ label: "6", y: 25 },
						{ label: "7", y: 45 },
						{ label: "8", y: 33 },
						{ label: "9", y: 31 },
						{ label: "10", y: 37 },
						{ label: "11", y: 21 },
						{ label: "12", y: 27 },
						{ label: "13", y: 27 },
						{ label: "14", y: 28 },
						{ label: "15", y: 38 },
					],
				},
			],
		});
		chart4.render();

		// var i = 0;

		// var char5 = new CanvasJS.Chart("chartContainer5", {
		// 	colorSet: "shades",
		// 	title: {
		// 		text: "Fine paid for books",
		// 		fontFamily: "tahoma",
		// 	},
		// 	legend: {
		// 		cursor: "pointer",
		// 	},
		// 	data: [
		// 		{
		// 			type: "doughnut",
		// 			indexLabelPlacement: "inside",
		// 			indexLabel: " ",
		// 			startAngle: 30,
		// 			innerRadius: 88,
		// 			showInLegend: true,
		// 			// indexLabelFontSize: 17,

		// 			toolTipContent: "<b>{label}:</b> {y} (#percent%)",
		// 			dataPoints: dps,
		// 		},
		// 	],
		// });
		// chart5.render();

		function toggleDataSeries(e) {
			if (
				typeof e.dataSeries.visible === "undefined" ||
				e.dataSeries.visible
			) {
				e.dataSeries.visible = false;
			} else {
				e.dataSeries.visible = true;
			}
			e.chart.render();
		}
	};
</script>
<script src="https://canvasjs.com/assets/script/canvasjs.min.js"></script>

<div class="main-panel">
	<div class="content-wrapper">
		<div class="page-header">
			<h3 class="page-title">
				<span
					class="page-title-icon bg-gradient-primary text-white mr-2"
				>
					<i class="mdi mdi-home"></i>
				</span>
				Dashboard
			</h3>
		</div>

		<div class="row">
			<div class="col-md-4 stretch-card grid-margin">
				<div class="card bg-gradient-danger card-img-holder text-white">
					<div class="card-body">
						<img
							src="/static/circle.svg"
							class="card-img-absolute"
							alt="circle-image"
						/>
						<h4 class="font-weight-normal mb-3">
							Total Books
							<i
								class="mdi mdi-chart-line mdi-24px float-right"
							></i>
						</h4>
						<h2 class="mb-5">{{book_cnt}}</h2>
						<!-- <h6 class="card-text">Increased by 60%</h6> -->
					</div>
				</div>
			</div>
			<div class="col-md-4 stretch-card grid-margin">
				<div class="card bg-gradient-info card-img-holder text-white">
					<div class="card-body">
						<img
							src="/static/circle.svg"
							class="card-img-absolute"
							alt="circle-image"
						/>
						<h4 class="font-weight-normal mb-3">
							Total Journals
							<i
								class="mdi mdi-bookmark-outline mdi-24px float-right"
							></i>
						</h4>
						<h2 class="mb-5">{{journal_cnt}}</h2>
						<!-- <h6 class="card-text">Decreased by 10%</h6> -->
					</div>
				</div>
			</div>
			<div class="col-md-4 stretch-card grid-margin">
				<div
					class="card bg-gradient-success card-img-holder text-white"
				>
					<div class="card-body">
						<img
							src="/static/circle.svg"
							class="card-img-absolute"
							alt="circle-image"
						/>
						<h4 class="font-weight-normal mb-3">
							Total Issued Books
							<i class="mdi mdi-diamond mdi-24px float-right"></i>
						</h4>
						<h2 class="mb-5">{{issue_cnt}}</h2>
						<!-- <h6 class="card-text">Increased by 5%</h6> -->
					</div>
				</div>
			</div>
		</div>

		<div class="row">
			<div class="col-md-7 grid-margin stretch-card">
				<div class="card" style="height: 470px;">
					<div class="card-body">
						<div class="clearfix" id="chartContainer">
							<!-- <img src="/static/plot_issue_day_of_month.png" /> -->
						</div>
					</div>
				</div>
			</div>
			<div class="col-md-5 grid-margin stretch-card">
				<div class="card" style="height: 470px;">
					<div class="card-body">
						<div class="clearfix" id="chartContainer2">
							<!-- <img src="/static/plot_category_counts.png" /> -->
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="row">
			<div class="col-md-5 grid-margin stretch-card">
				<div class="card" style="height: 470px;">
					<div class="card-body">
						<div class="clearfix" id="chartContainer2">
							<img src="/static/plot_fines_pie.png" />
						</div>
					</div>
				</div>
			</div>
			<div class="col-md-7 grid-margin stretch-card">
				<div class="card" style="height: 470px;">
					<div class="card-body">
						<div class="clearfix" id="chartContainer">
							<img src="/static/plot_category_counts.png" />
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="row">
			<div class="col-md-7 grid-margin stretch-card">
				<div class="card" style="height: 470px;">
					<div class="card-body">
						<div class="clearfix" id="chartContainer3">
							<!-- <img src="/static/plot_issue_day_of_week.png" /> -->
						</div>
					</div>
				</div>
			</div>
			<div class="col-md-5 grid-margin stretch-card">
				<div class="card" style="height: 470px;">
					<div class="card-body">
						<div class="clearfix" id="chartContainer4">
							<!-- <img src="/static/plot_return_duration.png" /> -->
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
{% endblock %}
